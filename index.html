<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust WebGL - Pixel Coordinates</title>
    <style>
        body {
            background-color: #222;
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Hide scrollbars */
        }

        canvas {
            /* This makes the canvas look nice (border) */
            border: 1px solid #666;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);

            /* KEY TRICK: 
               We set the internal resolution in the HTML tag (1920x1080).
               But we use CSS to tell it to "fit" in the window. 
               This keeps your coordinate system at 1920x1080 regardless of screen size. 
            */
            max-width: 100%;
            max-height: 100%;
            aspect-ratio: 16/9;
        }
    </style>
</head>
<body>

    <canvas id="my-canvas" width="1920" height="1080"></canvas>

    <script type="module">
        // Import the Rust WASM code
        import init from './pkg/tv_app.js';

        async function run() {
            // Initialize the WASM module
            await init();
            console.log("Rust WebGL has started!");
        }

        run().catch(console.error);
    </script>

</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rust WebGL TV App</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; }
        canvas { display: block; width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <canvas id="my-canvas" width="1920" height="1080"></canvas>
    
    <script type="module">
        import init, { GameEngine } from './pkg/tv_app.js';

        async function run() {
            // 1. Initialize Wasm
            await init();

            // 2. Create the Rust Engine
            // We pass the canvas ID ("my-canvas") to Rust
            const game = new GameEngine("my-canvas");
            
            console.log("Rust Engine Started! ðŸ¦€");

            // 3. The JS Animation Loop
            function loop() {
                // Call Rust to draw one frame
                game.render();
                
                // Request next frame
                requestAnimationFrame(loop);
            }
            // Start the loop
            requestAnimationFrame(loop);

            // 4. The JS Input Bridge âŒ¨ï¸
            window.addEventListener('keydown', (e) => {
                const code = e.keyCode;
                
                // Optional: Map TV Remote keys to Standard Keys here
                // if (code === 13) game.send_key(39); // Enter acts as Right Arrow?
                
                console.log(`JS received: ${code} -> Sending to Rust`);
                
                // BRIDGE: Pass the integer to Rust
                game.send_key(code);
            });
        }

        run();
    </script>
</body>
</html>